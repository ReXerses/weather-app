(()=>{"use strict";const n={getDayName:function(n,e){return new Date(n).toLocaleDateString(e,{weekday:"short"})},giorniFuturi:function(n){const e=new Date;e.setDate(e.getDate()+n);return(t=e.getDate())<10?"0"+t:t.toString();var t},approssimaOraAttuale:function(){return(new Date).getHours()},convertiCelsiusToFahrenheitAndAggiorna:function(n){document.querySelectorAll(n).forEach((n=>{const e=9*parseFloat(n.innerText)/5+32;n.textContent=`${e.toFixed(1)}° `}))},convertiFahrenheitToCelsiusAndAggiorna:function(n){document.querySelectorAll(n).forEach((n=>{const e=5*(parseFloat(n.innerText)-32)/9;n.textContent=`${e.toFixed(1)}° `}))},saveCittàToLocalStorage:function(n){localStorage.setItem("ultimaCittà",n)},loadCittàFromLocalStorage:function(){return localStorage.getItem("ultimaCittà")||""}},e=n,t=(()=>{function n(n,e,t){const a=document.createElement("div");a.classList.add("boxPrevisioneOraria");const o=document.createElement("div");o.classList.add("boxOrario");const i=document.createElement("span");i.textContent=`${t<10?"0"+t:t}:00`,o.appendChild(i),a.appendChild(o);const r=document.createElement("div");r.classList.add("boxIcona");const s=document.createElement("img");s.src="https:"+n.forecast.forecastday[e].hour[t].condition.icon,r.appendChild(s),a.appendChild(r);const c=document.createElement("div");c.classList.add("boxCondizione");const d=document.createElement("span");d.textContent=n.forecast.forecastday[e].hour[t].condition.text,c.appendChild(d),a.appendChild(c);const l=document.createElement("div");l.classList.add("boxTempMedia");const m=document.createElement("span");return m.textContent=` ${n.forecast.forecastday[e].hour[t].temp_c}°`,m.classList.add("tempMedia"),l.appendChild(m),a.appendChild(l),a.classList.add("animateFromLeft"),a.addEventListener("animationend",(()=>{a.classList.remove("animateFromLeft")})),a}return{aggiornamentoPagina:function(t,a){const o=document.querySelector(".nomePaese"),i=document.querySelector(".giorno"),r=document.querySelector(".oggi"),s=document.querySelector(".domani"),c=document.querySelector(".dopoDomani"),d=document.getElementById("iconaOggi"),l=document.getElementById("iconaDomani"),m=document.getElementById("iconaDopoDomani"),g=document.getElementById("gradiMinOggi"),p=document.getElementById("gradiMaxOggi"),u=document.getElementById("gradiMinDomani"),f=document.getElementById("gradiMaxDomani"),x=document.getElementById("gradiMinDopoDomani"),h=document.getElementById("gradiMaxDopoDomani");o.textContent=`Previsioni meteo ${t.location.name}`,i.textContent=`${e.getDayName(t.forecast.forecastday[a].date)}  ${e.giorniFuturi(a)}`,r.textContent=`Oggi ${e.getDayName(t.forecast.forecastday[0].date)}  ${e.giorniFuturi(0)}`,s.textContent=`Domani ${e.getDayName(t.forecast.forecastday[1].date)}  ${e.giorniFuturi(1)}`,c.textContent=`${e.getDayName(t.forecast.forecastday[2].date)}  ${e.giorniFuturi(2)}`,d.src="https:"+t.forecast.forecastday[0].day.condition.icon,d.alt=t.forecast.forecastday[0].day.condition.text,l.src="https:"+t.forecast.forecastday[1].day.condition.icon,l.alt=t.forecast.forecastday[1].day.condition.text,m.src="https:"+t.forecast.forecastday[2].day.condition.icon,m.alt=t.forecast.forecastday[2].day.condition.text,g.textContent=`${t.forecast.forecastday[0].day.mintemp_c}° `,p.textContent=`${t.forecast.forecastday[0].day.maxtemp_c}° `,u.textContent=`${t.forecast.forecastday[1].day.mintemp_c}° `,f.textContent=`${t.forecast.forecastday[1].day.maxtemp_c}° `,x.textContent=`${t.forecast.forecastday[2].day.mintemp_c}° `,h.textContent=`${t.forecast.forecastday[2].day.maxtemp_c}° `,function(t,a){const o=document.querySelector(".terzaParteMain");if(o.innerHTML="",0===a){let i=e.approssimaOraAttuale();for(;i<24;)o.appendChild(n(t,a,i)),i++}else for(let e=0;e<24;e++)o.appendChild(n(t,a,e))}(t,a)}}})(),a=t,o={tempo:async function(n){try{const e=await fetch(`https://api.weatherapi.com/v1/forecast.json?q=${n},IT&days=3&lang=it&key=814d944e64c940d1984180548230211`),t=await e.json();if(t.location.name.toLowerCase()!=n.toLowerCase())throw new Error(`Città ${n} non trovata!`);return t}catch(n){return console.error("Errore durante la chiamata API:",n),alert(n),null}}},i=o;document.body.innerHTML='<style>\n    .animateFromLeft {\n        animation: animateFromLeft 0.5s ease-out;\n    }\n    \n    @keyframes animateFromLeft {\n        from {\n            opacity: 0;\n            transform: translateX(-20px);\n        }\n        to {\n            opacity: 1;\n            transform: translateX(0);\n        }\n    }\n\n    body {\n        margin: 0px;\n        display: flex;\n        flex-direction: column;\n        min-height: 100vh;\n        max-height: 100%;\n        justify-content: space-between;\n        font-size: 2rem;\n    }\n    \n    .footer {\n        font-size: 2rem;\n        font-family: system-ui, -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Oxygen, Ubuntu, Cantarell, \'Open Sans\', \'Helvetica Neue\', sans-serif;\n        display: flex;\n        gap: 5px;\n        background-color: #1461a1;\n        justify-content: center;\n        z-index: 3;\n    }\n    \n    a{\n        text-decoration: none;\n    }\n    \n    a img {\n        height: 2.1rem;\n        width: 2rem;\n        filter:brightness(0) invert(1);\n    }\n    \n    .nome-github {\n        color: rgb(255, 255, 255);\n    }\n    \n    nav {\n        background-color: #1461a1;\n        filter: drop-shadow(0px 0vh 2vh #000000);\n        position: sticky;\n        top: 0;\n    }\n    \n    .primaParteNav {\n        display: flex;\n        justify-content: space-evenly;\n        padding: 10px;\n        color: white;\n        font-weight: bold;\n        font-size: 3rem;\n    }\n    \n    .secondaParteNav {\n        padding: 1rem;\n    }\n\n    .inputCittà {\n        display: flex;\n        height: 40px;\n    }\n\n    #searchBtn {\n        width: 55px;\n        height: 38px;\n        border: none;\n        border-top-right-radius: 8px;\n        border-bottom-right-radius: 8px;\n        background-image: url(magnify.svg);\n        background-size: 100% 100%;\n        background-color: rgb(0 255 208);\n        filter: invert(1);\n        cursor: pointer;\n    }\n\n    #searchBox {\n        border-top-left-radius: 8px;\n        border-bottom-left-radius: 8px;\n        padding: 8px;\n        height: 22px;\n        border: none;\n        color: rgb(5 38 133);\n        font-size: 1.0rem;\n        letter-spacing: 1px;\n    }\n\n    #searchBox:focus {\n        outline: none;\n    }\n\n    #cambioGradi {\n        height: 35px;\n        width: 35px;\n        border: 4px solid black;\n        background-color: #00000000;\n        border-radius: 16px;\n        cursor: pointer;\n        filter: brightness(0) invert(1);\n    }\n\n    #cambioGradi:hover {\n        transform: scale(.9);\n        box-shadow: 0 3px 15px -2px;\n    }\n\n    .celsius {\n        background-image: url(celsius.svg);\n        background-size: 100% 100%;\n    }\n    .fahre {\n        background-image: url(fahre.svg);\n        background-size: 100% 100%;\n    }\n    \n    .mainContainer {\n        display: flex;\n        flex-direction: column;\n        flex: 1;\n    }\n    \n    .primaParteMain {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 1.5rem;\n        padding: 2rem;\n        text-align: center;\n        border-bottom: 1px solid #1461a1;\n    }\n\n    .nomePaese {\n        border-bottom: 1px solid #1461a1;\n    }\n    \n    .secondaParteMain {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        font-size: clamp(14px,3vw,4rem);\n        border-bottom: 1px solid #1461a1;\n    }\n\n    .boxIcona > img {\n        height: 50px;\n    }\n\n\n    .boxPrevisioneOraria {\n        display: flex;\n        align-items: center;\n        column-gap: 1rem;\n        padding: 1rem;\n        font-size: clamp(14px,3vw,4rem);\n    }\n\n    .boxOrario, .boxIcona, .boxTempMedia {\n        flex: 1;\n        font-size: clamp(14px,2vw,4rem);\n        display: flex;\n    }\n\n    .boxCondizione {\n        flex: 3;\n        font-size: clamp(14px,1.5vw,4rem);\n    }\n\n    /*.secondaParteMain > :nth-child(odd) {\n        background-color:  #8080800a;\n    }*/\n\n    .terzaParteMain > :nth-child(odd) {\n        background-color:  #1461a117;\n    }\n\n    .contenitoreUno, .contenitoreDue, .contenitoreTre {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        flex: 1;\n        cursor: pointer;\n        font-size: clamp(14px,1.5vw,4rem);\n        gap: 6px;\n        padding: 10px;\n    }\n\n    .giornoSelezionato {\n        background-color: #1461a1;\n        color: white;\n      font-weight: bold;\n   }\n\n\n    </style>\n\n    <nav>\n        <div class="primaParteNav">\n            <div class="titolo">Meteo APP</div>\n            <div class="generalButtons">\n                <button id="cambioGradi" class=\'celsius\'></button>\n            </div>\n        </div>\n        <form class="secondaParteNav">\n            <div class=\'inputCittà\'>\n                <input type="text" name="citySearch" id="searchBox" autocomplete=\'off\'>\n                <button id="searchBtn"></button>\n            </div>\n        </form>\n    </nav>\n\n    <div class="mainContainer">\n\n        <div class="primaParteMain">\n            <div class="nomePaese"></div>\n            <div class="giorno"></div>\n        </div>\n\n        <div class="secondaParteMain">\n            <div class="contenitoreUno" id=\'box1\'>\n                <span class="oggi"></span>\n                <img src=\'\' alt="" id=\'iconaOggi\'>\n                <div class="gradi">\n                    <span class="gradiMin" id=\'gradiMinOggi\'></span>\n                    <span class="gradiMax" id=\'gradiMaxOggi\'></span>\n                </div>\n            </div>\n            <div class="contenitoreDue" id=\'box2\'>\n                <span class="domani"></span>\n                <img src=\'\' alt="" id=\'iconaDomani\'>\n                <div class="gradi">\n                    <span class="gradiMin" id=\'gradiMinDomani\'></span>\n                    <span class="gradiMax" id=\'gradiMaxDomani\'></span>\n                </div>\n            </div>\n            <div class="contenitoreTre" id=\'box3\'>\n                <span class="dopoDomani"></span>\n                <img src="" alt="" id=\'iconaDopoDomani\'>\n                <div class="gradi">\n                    <span class="gradiMin" id=\'gradiMinDopoDomani\'></span>\n                    <span class="gradiMax" id=\'gradiMaxDopoDomani\'></span>\n                </div>\n            </div>\n        </div>\n\n        <div class="terzaParteMain">\n\n        </div>\n    </div>\n\n    <div class="footer">\n\n        <a href="https://github.com/ReXerses" target="_blank">\n            <img src="github.svg" alt="Personal Github link">\n        </a>\n        <a class=\'nome-github\' href="https://github.com/ReXerses" target="_blank">ReXerses</a>\n\n    </div>\n    ';const r=document.querySelector(".secondaParteNav"),s=document.getElementById("searchBox"),c=document.getElementById("cambioGradi");let d=e.loadCittàFromLocalStorage();d||(d="Roma"),s.placeholder=d,r.addEventListener("submit",(n=>{n.preventDefault(),d=s.value,e.saveCittàToLocalStorage(d),l.click()}));const l=document.getElementById("box1"),m=document.getElementById("box2"),g=document.getElementById("box3");c.addEventListener("click",(()=>{c.classList.contains("celsius")?(c.classList.remove("celsius"),c.classList.add("fahre"),e.convertiCelsiusToFahrenheitAndAggiorna(".gradiMin"),e.convertiCelsiusToFahrenheitAndAggiorna(".gradiMax"),e.convertiCelsiusToFahrenheitAndAggiorna(".tempMedia")):(c.classList.remove("fahre"),c.classList.add("celsius"),e.convertiFahrenheitToCelsiusAndAggiorna(".gradiMin"),e.convertiFahrenheitToCelsiusAndAggiorna(".gradiMax"),e.convertiFahrenheitToCelsiusAndAggiorna(".tempMedia"))})),l.addEventListener("click",(async()=>{m.classList.remove("giornoSelezionato"),g.classList.remove("giornoSelezionato"),l.classList.add("giornoSelezionato"),c.classList.remove("fahre"),c.classList.add("celsius");let n=await i.tempo(d);a.aggiornamentoPagina(n,0)})),l.click(),m.addEventListener("click",(async()=>{l.classList.remove("giornoSelezionato"),g.classList.remove("giornoSelezionato"),m.classList.toggle("giornoSelezionato"),c.classList.remove("fahre"),c.classList.add("celsius");let n=await i.tempo(d);a.aggiornamentoPagina(n,1)})),g.addEventListener("click",(async()=>{l.classList.remove("giornoSelezionato"),m.classList.remove("giornoSelezionato"),g.classList.toggle("giornoSelezionato"),c.classList.remove("fahre"),c.classList.add("celsius");let n=await i.tempo(d);a.aggiornamentoPagina(n,2)}))})();
//
